<div class=" relative p-4 rounded-xl shadow bg-white">
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-bold text-gray-800">Đơn hàng</h1>
    <div class="flex gap-3">
      <button
        class="flex items-center bg-white text-blue-600 border border-blue-500 px-4 py-2 rounded-xl shadow-sm hover:bg-blue-50 transition"
      >
        <fa-icon [icon]="faFileExport"></fa-icon>
        <span class="ml-2 font-medium">Xuất file</span>
      </button>
    </div>
  </div>

  <div class="overflow-x-auto border rounded-xl">
    <table class="table-auto text-left border-collapse bg-white rounded-t-xl w-full">
      <thead class="bg-gray-50 text-gray-400 text-sm">
      <tr>
        <th class="p-3 text-center">
          <input
            (change)="onCheckboxAll($event)"
            [checked]="selectionService.isAllSelected"
            class="w-4 h-4 accent-blue-500 cursor-pointer"
            type="checkbox"
          />
        </th>
        <th class="p-3">Order</th>
        <th class="p-3">Date</th>
        <th class="p-3">Customer</th>
        <th class="p-3">Payment Status</th>
        <th class="p-3">Order Status</th>
        <th class="p-3">Total</th>
      </tr>
      </thead>
      <tbody>
      <ng-container *ngIf="orders.length > 0; else noData">
        <tr
          *ngFor="let order of orders"
          class="border-b last:border-none hover:bg-gray-50 transition"
        >
          <td class="p-3 text-center">
            <input
              (change)="onCheckbox(order.id, $event)"
              [checked]="selectionService.selectedItems.includes(order.id)"
              class="w-4 h-4 accent-blue-500 cursor-pointer"
              type="checkbox"
            />
          </td>
          <td class="p-3">
          <span class="inline-block bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs font-mono">
            {{ order.orderCode }}
          </span>
          </td>
          <td class="p-3 text-gray-800 whitespace-nowrap">
            {{ order.formattedDate }}
          </td>
          <td class="p-3 text-gray-800 max-w-[200px] truncate">{{ order.customerName }}</td>
          <td class="p-3">
            <span
              [appStatus]="PaymentStatusMeta[order.paymentStatus]"
              class="inline-block px-2 py-1 rounded-full text-xs "
            ></span>
          </td>
          <td class="p-3">
            <span
              [appStatus]="OrderStatusMeta[order.orderStatus]"
              class="inline-block px-2 py-1 rounded-full text-xs "
            ></span>
          </td>
          <td class="p-3 text-gray-800  text-right">
            {{ order.orderAmount | currency: 'VND' }}
          </td>
        </tr>
      </ng-container>
      <ng-template #noData>
        <tr>
          <td class="text-center text-gray-500 py-4" colspan="7">
            Không có dữ liệu
          </td>
        </tr>
      </ng-template>
      </tbody>
    </table>
  </div>
  <div class=" p-4 border-t">
    <app-page
      (pageChange)="loadOrders($event.page)"
      (pageSizeChange)="onPageSizeChange($event)"
      [currentPage]="currentPage"
      [pageSize]="pageSize"
      [pageSizes]="pageSizes"
      [totalItems]="totalItems"
    ></app-page>
  </div>

</div>
