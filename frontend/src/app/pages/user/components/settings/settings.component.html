<div class="max-w-4xl mx-auto">
  <header class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">C√†i ƒê·∫∑t</h1>
  </header>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="mb-6 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg">
    {{ successMessage }}
  </div>

  <!-- Tabs -->
  <div class="bg-white rounded-xl shadow-md overflow-hidden">
    <div class="flex border-b border-gray-200">
      <button
        (click)="setActiveTab('profile')"
        [class.bg-blue-50]="activeTab === 'profile'"
        [class.border-blue-600]="activeTab === 'profile'"
        [class.text-blue-600]="activeTab === 'profile'"
        class="flex-1 py-4 px-6 text-center font-medium border-b-2 border-transparent hover:bg-gray-50 transition"
      >
        Th√¥ng tin c√° nh√¢n
      </button>
      <button
        (click)="setActiveTab('password')"
        [class.bg-blue-50]="activeTab === 'password'"
        [class.border-blue-600]="activeTab === 'password'"
        [class.text-blue-600]="activeTab === 'password'"
        class="flex-1 py-4 px-6 text-center font-medium border-b-2 border-transparent hover:bg-gray-50 transition"
      >
        ƒê·ªïi m·∫≠t kh·∫©u
      </button>
    </div>

    <!-- Profile Tab -->
    <div *ngIf="activeTab === 'profile'" class="p-8">
      <form (ngSubmit)="onSubmitProfile()" [formGroup]="profileForm">
        <div class="space-y-6">
          <!-- Full Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">H·ªç v√† t√™n *</label>
            <input
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition"
              formControlName="fullName"
              placeholder="Nh·∫≠p h·ªç v√† t√™n"
              type="text"
            />
            <p *ngIf="profileForm.get('fullName')?.invalid && profileForm.get('fullName')?.touched"
               class="mt-1 text-sm text-red-600">
              H·ªç t√™n ph·∫£i c√≥ √≠t nh·∫•t 3 k√Ω t·ª±
            </p>
          </div>

          <!-- Email -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
            <input
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition"
              formControlName="email"
              placeholder="example@email.com"
              type="email"
            />
            <p *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched"
               class="mt-1 text-sm text-red-600">
              Email kh√¥ng h·ª£p l·ªá
            </p>
          </div>

          <!-- Phone -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">S·ªë ƒëi·ªán tho·∫°i *</label>
            <input
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition"
              formControlName="phone"
              placeholder="0123456789"
              type="tel"
            />
            <p *ngIf="profileForm.get('phone')?.invalid && profileForm.get('phone')?.touched"
               class="mt-1 text-sm text-red-600">
              S·ªë ƒëi·ªán tho·∫°i ph·∫£i c√≥ 10 ch·ªØ s·ªë
            </p>
          </div>

          <!-- Address -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">ƒê·ªãa ch·ªâ *</label>
            <input
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition"
              formControlName="address"
              placeholder="S·ªë nh√†, t√™n ƒë∆∞·ªùng"
              type="text"
            />
          </div>

          <!-- City & District -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Th√†nh ph·ªë *</label>
              <select
                class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition"
                formControlName="city"
              >
                <option value="">Ch·ªçn th√†nh ph·ªë</option>
                <option value="TP.HCM">TP. H·ªì Ch√≠ Minh</option>
                <option value="H√† N·ªôi">H√† N·ªôi</option>
                <option value="ƒê√† N·∫µng">ƒê√† N·∫µng</option>
                <option value="C·∫ßn Th∆°">C·∫ßn Th∆°</option>
              </select>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Qu·∫≠n/Huy·ªán *</label>
              <select
                class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition"
                formControlName="district"
              >
                <option value="">Ch·ªçn qu·∫≠n/huy·ªán</option>
                <option value="Qu·∫≠n 1">Qu·∫≠n 1</option>
                <option value="Qu·∫≠n 2">Qu·∫≠n 2</option>
                <option value="Qu·∫≠n 3">Qu·∫≠n 3</option>
                <option value="Qu·∫≠n 4">Qu·∫≠n 4</option>
              </select>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="flex gap-4 pt-4">
            <button
              [disabled]="isLoading"
              class="flex-1 bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition"
              type="submit"
            >
              {{ isLoading ? 'ƒêang l∆∞u...' : 'L∆∞u thay ƒë·ªïi' }}
            </button>
            <button
              (click)="loadUserProfile()"
              class="px-6 py-3 border-2 border-gray-200 rounded-lg font-semibold hover:bg-gray-50 transition"
              type="button"
            >
              H·ªßy
            </button>
          </div>
        </div>
      </form>
    </div>

    <!-- Password Tab -->
    <div *ngIf="activeTab === 'password'" class="p-8">
      <form (ngSubmit)="onSubmitPassword()" [formGroup]="passwordForm">
        <div class="space-y-6">
          <!-- Current Password -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">M·∫≠t kh·∫©u hi·ªán t·∫°i *</label>
            <input
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition"
              formControlName="currentPassword"
              placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i"
              type="password"
            />
          </div>

          <!-- New Password -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">M·∫≠t kh·∫©u m·ªõi *</label>
            <input
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition"
              formControlName="newPassword"
              placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi"
              type="password"
            />
            <p *ngIf="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched"
               class="mt-1 text-sm text-red-600">
              M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±
            </p>
          </div>

          <!-- Confirm Password -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi *</label>
            <input
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition"
              formControlName="confirmPassword"
              placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi"
              type="password"
            />
          </div>

          <!-- Info Box -->
          <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
            <p class="text-sm text-blue-700">
              <strong>L∆∞u √Ω:</strong> M·∫≠t kh·∫©u m·ªõi ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª± v√† n√™n k·∫øt h·ª£p ch·ªØ c√°i, s·ªë v√† k√Ω t·ª± ƒë·∫∑c
              bi·ªát.
            </p>
          </div>

          <!-- Submit Button -->
          <div class="flex gap-4 pt-4">
            <button
              [disabled]="isLoading"
              class="flex-1 bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition"
              type="submit"
            >
              {{ isLoading ? 'ƒêang c·∫≠p nh·∫≠t...' : 'ƒê·ªïi m·∫≠t kh·∫©u' }}
            </button>
            <button
              (click)="passwordForm.reset()"
              class="px-6 py-3 border-2 border-gray-200 rounded-lg font-semibold hover:bg-gray-50 transition"
              type="button"
            >
              H·ªßy
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- Account Actions -->
  <div class="mt-8 bg-white rounded-xl shadow-md p-6">
    <h3 class="text-lg font-semibold text-gray-900 mb-4">Thao t√°c t√†i kho·∫£n</h3>
    <div class="space-y-3">
      <button class="w-full text-left px-4 py-3 border-2 border-gray-200 rounded-lg hover:bg-gray-50 transition">
        <span class="font-medium text-gray-900">üîî C√†i ƒë·∫∑t th√¥ng b√°o</span>
        <p class="text-sm text-gray-500 mt-1">Qu·∫£n l√Ω c√°ch b·∫°n nh·∫≠n th√¥ng b√°o</p>
      </button>
      <button class="w-full text-left px-4 py-3 border-2 border-gray-200 rounded-lg hover:bg-gray-50 transition">
        <span class="font-medium text-gray-900">üîí B·∫£o m·∫≠t t√†i kho·∫£n</span>
        <p class="text-sm text-gray-500 mt-1">X√°c th·ª±c hai y·∫øu t·ªë v√† c√°c t√πy ch·ªçn b·∫£o m·∫≠t</p>
      </button>
      <button
        class="w-full text-left px-4 py-3 border-2 border-red-200 rounded-lg hover:bg-red-50 transition text-red-600">
        <span class="font-medium">‚ö†Ô∏è X√≥a t√†i kho·∫£n</span>
        <p class="text-sm text-red-500 mt-1">X√≥a vƒ©nh vi·ªÖn t√†i kho·∫£n v√† to√†n b·ªô d·ªØ li·ªáu</p>
      </button>
    </div>
  </div>
</div>

